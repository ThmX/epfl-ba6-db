%------------------------------------------------------------------------------
%  queries.tex
%------------------------------------------------------------------------------
%
%	BA6 - Database systems
%
%	Authors :
%		203267 - Bastien Antoine
%		183785 - Denor√©az Thomas
%		185078 - Dieulivol David
%
%	Versions :
%		2013.03.30 - Initial version
%

\chapter{Queries}

Here are some explanations of queries that seem difficult to understand:
\begin{itemize}
	\item[$\circ$] The query A is the intersection of athletes who won medals in summer and who won in
	winter.
	\item[$\circ$] The query C is selecting the minimum year (so the first event) where a country won its
first medal. It returns for each country the corresponding Olympics which mean the host
city and the year.
	\item[$\circ$] The query D is selecting the union of the best country (most of medals) of all of the winter
Olympics and the best one of all of the summer Olympics.
	\item[$\circ$] The query G is taking for each Olympics the maximum of all counts of participants in
each country.
\end{itemize}

\begin{center}
	\lstinputlisting[caption={Query A}]{scripts/A.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query B}]{scripts/B.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query C}]{scripts/C.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query D}]{scripts/D.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query E}]{scripts/E.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query F}]{scripts/F.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query G}]{scripts/G.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query H}]{scripts/H.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query I}]{scripts/I.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query J}]{scripts/J.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query K}]{scripts/K.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query L}]{scripts/L.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query M}]{scripts/M.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query N}]{scripts/N.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query O}]{scripts/O.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query P}]{scripts/P.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query Q}]{scripts/Q.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query R}]{scripts/R.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query S}]{scripts/S.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query T}]{scripts/T.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query U}]{scripts/U.sql}
\end{center}

\begin{center}
	\lstinputlisting[caption={Query V}]{scripts/V.sql}
\end{center}

\section{Indexes}
While trying to add an index, we discovered that \textbf{MySQL} already generated indexes for all entities and relations.
It was then useless for us to insert a new index, here is the code we would have used.

\begin{lstlisting}[caption={Index creation}]
CREATE INDEX myIndex
ON Representant_participates_Event (country_id, games_id)
\end{lstlisting}


\section{Performances}
When launching the queries, we can see the time spent by the system to execute the query.

%------------------------------------------------------------------------------
% END OF DOCUMENT
%------------------------------------------------------------------------------